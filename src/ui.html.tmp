<!DOCTYPE html>
    <head>
        <link rel="stylesheet" href="styles.css">

        <h2>Applitools Settings</h2>
        <p>API Key: <input id="key" value=""></p>
        <p>Server URL: <input id="url" value="https://eyesapi.applitools.com"></p>
        <p>All Components? <input type="checkbox" id="everything" value=""></p>
        <button id="save">Save</button>
        <button id="cancel">Cancel</button>
        <p>
            <textarea readonly placeholder="console output" wrap="soft" id="console"></textarea>
            <!-- <textarea readonly placeholder="console output" wrap="soft" id="console" style="border:solid 2px rgb(0, 0, 0)"></textarea> -->
        </p>

        <!-- https://stackoverflow.com/questions/20256760/javascript-console-log-to-html/20256785 -->
        <script>

            (function() {
                var cors_api_host = 'infinite-dawn-90208.herokuapp.com';
                var cors_api_url = 'https://' + cors_api_host + '/';
                var slice = [].slice;
                var origin = window.location.protocol + '//' + window.location.host;
                var open = XMLHttpRequest.prototype.open;
                XMLHttpRequest.prototype.open = function() {
                    var args = slice.call(arguments);
                    var targetOrigin = /^https?:\/\/([^\/]+)/i.exec(args[1]);
                    if (targetOrigin && targetOrigin[0].toLowerCase() !== origin &&
                        targetOrigin[1] !== cors_api_host) {
                        args[1] = cors_api_url + args[1];
                    }
                    return open.apply(this, args);
                };
            })();

            (function () {
                if (!console) {
                    console = {};
                }
                var old = console.log;
                var logger = document.getElementById('console');
                console.log = function (message) {
                    if (typeof message == 'object') {
                        logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : String(message) + '\n');
                    } else {
                        logger.innerHTML += message + '\n';
                    }
                }
            })();
        </script>
    </head>
</html>